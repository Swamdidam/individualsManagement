'use strict';

/*********************************************************
 Created  by Swam Didam Bobby on 09/08/2018
 Modified by Swam Didam Bobby on 13/08/2018
/********************************************************/

/**
 * module dependencies
 */
const
    http    = require( 'http' ) ,
    app     = require( './app' ) ,
    log     = require( './utils/logger' ).getLogger( 'APP' ) ;

//=============================================================================
/**
 * HTTP server instance
 */
//=============================================================================
const server = http.createServer( app ) ;
//=============================================================================
/**
 * Module variables
 */
//=============================================================================
const
    port = app.get( 'port' ) ,
    env = app.get( 'env' ) ;
//=============================================================================
/**
 * Bind to port
 */
//=============================================================================
server.listen( port, () => {
    log.info( 'Server up on port %s and in %s mode', port, env ) ;
});
//=============================================================================
/**
 * Conditionally export module
 */
//=============================================================================
if ( require.main != module ) {
    module.exports = server ;
}
//=============================================================================
